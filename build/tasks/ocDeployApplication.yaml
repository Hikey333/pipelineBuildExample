apiVersion: tekton.dev/v1alpha1
kind: Task
metadata:
  name: oc-deploy-application
spec:
  resources:
    inputs:
      - name: source
        type: git
  steps:
#    - name: view-git-files
#      command:
#        - ls
#        - -al
#        - /workspace/source/deployment
#      image: image-registry.openshift-image-registry.svc:5000/openshift/cli:latest
    - name: oc-create-resources
      command:
        - oc
        - apply
        - '-k'
        - .
      image: image-registry.openshift-image-registry.svc:5000/openshift/cli:latest
      workingDir: /workspace/source/deployment
    - name: oc-get-resources
      command:
        - oc
        - get
        - all
      image: image-registry.openshift-image-registry.svc:5000/openshift/cli:latest
